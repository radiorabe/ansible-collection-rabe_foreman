---
- name: 'RaBe Foreman Config : Job Templates'
  block:
    - name: 'RaBe Foreman Config : Unlock All Job Templates'
      ansible.builtin.include_role:
        name: radiorabe.foreman.job_templates
      vars:
        foreman_job_templates:
          - name: '*'
            locked: false
      when: not ansible_check_mode
    - name: 'RaBe Foreman Config : Configure Job Templates'
      ansible.builtin.include_role:
        name: radiorabe.foreman.job_templates
      vars:
        foreman_job_templates:
          - name: Ansible Collection - Install from Galaxy
            job_category: Ansible Galaxy
            description_format: Install collections '%{ansible_collections_list}'
              from Galaxy
            snippet: false
            template_inputs:
              - name: ansible_collections_list
                required: true
                input_type: user
                description: "List of collections in Ansible Galaxy to install,\
                  \ separated by commas, e.g: mysql,nginx\r\n\r\nThe default collections_paths\
                  \ is configured in /etc/ansible/ansible.cfg, you may override\
                  \ it by filling the 'collections_path' input. Click on \"Advanced\"\
                  \ to see it."
                advanced: false
              - name: collections_path
                required: false
                input_type: user
                description: A particular directory where you want the downloaded
                  collections to be placed.
                advanced: true
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_collections_-_install_from_galaxy.erb'
          - name: Ansible Roles - Ansible Default
            job_category: Ansible Playbook
            description_format: Run Ansible roles
            feature: ansible_run_host
            snippet: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_roles_-_ansible_default.erb'
          - name: Ansible Roles - Install from Galaxy
            job_category: Ansible Galaxy
            description_format: Install roles '%{ansible_roles_list}' from Galaxy
            snippet: false
            template_inputs:
              - name: ansible_roles_list
                required: true
                input_type: user
                description: "List of roles in Ansible Galaxy to install, separated\
                  \ by commas, e.g: \"mysql, nginx\"\r\n\r\nThe default location\
                  \ is the 'roles_path' configured on /etc/ansible/ansible.cfg,\
                  \ you may override it by filling the 'location' input. Click on\
                  \ \"Advanced\" to see it."
                advanced: false
              - name: location
                required: false
                input_type: user
                description: A particular directory where you want the downloaded
                  roles to be placed.
                advanced: true
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_roles_-_install_from_galaxy.erb'
          - name: Ansible Roles - Install from git
            job_category: Ansible Roles Installation
            description_format: Clone roles from git repository to %{location}
            snippet: false
            template_inputs:
              - name: git_repository
                required: true
                input_type: user
                description: "URL to the git repository containing the roles, e.g:\r\
                  \nhttps://github.com/theforeman/foreman_role_1"
                advanced: false
              - name: location
                required: true
                input_type: user
                description: For example, '/etc/ansible/roles/foobar' . Look at
                  '/etc/ansible/ansible.cfg' roles_path option to find what is your
                  roles_path
                advanced: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_roles_-_install_from_git.erb'
          - name: Manage Windows Updates - Ansible Default
            snippet: false
            template_inputs:
              - name: reject_list
                required: false
                input_type: user
                description: "A list of update titles or KB numbers that can be\
                  \ used to specify which updates are to be excluded from installation.\r\
                  \nIf an available update does match one of the entries, then it\
                  \ is skipped and not installed.\r\nEach entry can either be the\
                  \ KB article or Update title as a regex according to the PowerShell\
                  \ regex rules."
                advanced: false
              - name: category_names
                required: false
                input_type: user
                description: "A scalar or list of categories to install updates\
                  \ from. To get the list of categories, run the module with state=searched.\
                  \ The category must be the full category string, but is case insensitive.\r\
                  \nSome possible categories are Application, Connectors, Critical\
                  \ Updates, Definition Updates, Developer Kits, Feature Packs,\
                  \ Guidance, Security Updates, Service Packs, Tools, Update Rollups\
                  \ and Updates.\r\n\r\nDefault is '[\"CriticalUpdates\", \"SecurityUpdates\"\
                  , \"UpdateRollups\"]'"
                advanced: false
              - name: log_path
                required: false
                input_type: user
                description: If set, win_updates will append update progress to
                  the specified file. The directory must already exist.
                advanced: false
              - name: reboot
                required: false
                input_type: user
                description: "Ansible will automatically reboot the remote host\
                  \ if it is required and continue to install updates after the\
                  \ reboot.\r\nThis can be used instead of using a win_reboot task\
                  \ after this one and ensures all updates for that category is\
                  \ installed in one go.\r\nAsync does not work when reboot=true.\r\
                  \n\r\nDefault is 'false'"
                options: "false\r\ntrue"
                advanced: false
              - name: reboot_timeout
                required: false
                input_type: user
                description: "The time in seconds to wait until the host is back\
                  \ online from a reboot.\r\nThis is only used if reboot=true and\
                  \ a reboot is required.\r\n\r\nDefault is '1200'"
                advanced: false
              - name: server_selection
                required: false
                input_type: user
                description: "Defines the Windows Update source catalog.\r\ndefault\
                  \ Use the default search source. For many systems default is set\
                  \ to the Microsoft Windows Update catalog. Systems participating\
                  \ in Windows Server Update Services (WSUS), Systems Center Configuration\
                  \ Manager (SCCM), or similar corporate update server environments\
                  \ may default to those managed update sources instead of the Windows\
                  \ Update catalog.\r\nmanaged_server Use a managed server catalog.\
                  \ For environments utilizing Windows Server Update Services (WSUS),\
                  \ Systems Center Configuration Manager (SCCM), or similar corporate\
                  \ update servers, this option selects the defined corporate update\
                  \ source.\r\nwindows_update Use the Microsoft Windows Update catalog.\r\
                  \n\r\nDefault is 'default'"
                options: "default\r\nmanaged_server\r\nwindows_update"
                advanced: false
              - name: state
                required: false
                input_type: user
                description: "Controls whether found updates are downloaded or installed\
                  \ or listed\r\nThis module also supports Ansible check mode, which\
                  \ has the same effect as setting state=searched\r\n\r\nDefault\
                  \ is 'searched'"
                options: "installed\r\nsearched\r\ndownloaded"
                advanced: false
              - name: use_scheduled_task
                required: false
                input_type: user
                description: "Will not auto elevate the remote process with become\
                  \ and use a scheduled task instead.\r\nSet this to true when using\
                  \ this module with async on Server 2008, 2008 R2, or Windows 7,\
                  \ or on Server 2008 that is not authenticated with basic or credssp.\r\
                  \nCan also be set to true on newer hosts where become does not\
                  \ work due to further privilege restrictions from the OS defaults."
                options: "false\r\ntrue"
                advanced: false
              - name: whitelist
                required: false
                input_type: user
                description: "A list of update titles or KB numbers that can be\
                  \ used to specify which updates are to be searched or installed.\r\
                  \nIf an available update does not match one of the entries, then\
                  \ it is skipped and not installed.\r\nEach entry can either be\
                  \ the KB article or Update title as a regex according to the PowerShell\
                  \ regex rules.\r\nThe whitelist is only validated on updates that\
                  \ were found based on category_names. It will not force the module\
                  \ to install an update if it was not in the category specified."
                advanced: false
            model: JobTemplate
            job_category: Ansible Playbook
            provider_type: Ansible
            kind: job_template
            organizations:
              - My_Organization
            locations:
              - My_Location
            state: absent
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_windows_updates.erb'
          - name: Capsule Upgrade Playbook
            snippet: false
            template_inputs:
              - name: target_version
                required: true
                input_type: user
                advanced: false
                value_type: plain
                hidden_value: false
              - name: whitelist_options
                required: false
                input_type: user
                advanced: false
                value_type: plain
                hidden_value: false
            model: JobTemplate
            job_category: Maintenance Operations
            description_format: '%{template_name}'
            provider_type: Ansible
            kind: job_template
            feature: ansible_run_capsule_upgrade
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/capsule_upgrade_-_ansible_default.erb'
          - name: Convert to RHEL
            snippet: false
            template_inputs:
              - name: Activation Key
                required: true
                input_type: user
                description: Set the activation key to assign the desired RHEL subscription
                  and life cycle environment to the converted machine at the registration
                  step.
                advanced: false
                value_type: resource
                resource_type: Katello::ActivationKey
                hidden_value: false
              - name: Restart
                required: true
                input_type: user
                description: Restart the system when it is successfully converted
                  to RHEL to boot the new RHEL kernel.
                options: "yes\r\nno"
                advanced: false
                value_type: plain
                resource_type: Katello::ActivationKey
                hidden_value: false
            model: JobTemplate
            job_category: Convert 2 RHEL
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/convert_to_rhel.erb'
          - kind: job_template
            name: Ansible - Run insights maintenance plan
            job_category: Ansible Playbook
            description_format: Insights maintenance plan for host
            feature: ansible_run_insights_plan
            template_inputs:
              - name: plan_id
                description: The playbook for the rule coming from insights.
                input_type: user
                required: true
              - name: organization_id
                description: The Foreman organization associated with the Insights
                  account
                input_type: user
                required: true
            provider_type: Ansible
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/maintenance_plan.erb'
          - kind: job_template
            name: Module Action - Ansible Default
            model: JobTemplate
            job_category: Ansible Modules
            description_format: Module %{action} %{module_spec}
            provider_type: Ansible
            template_inputs:
              - name: pre_script
                description: A script to run prior to the module action
                input_type: user
                required: false
                advanced: true
              - name: action
                description: The module action enable, install etc
                input_type: user
                required: true
                options: "\nlist\ninfo\nenable\ndisable\ninstall\nupdate\nremove\n\
                  provides\nreset"
              - name: module_spec
                description: The module specification. module:stream/profile
                input_type: user
                required: false
              - name: options
                description: Other optional flags for the action
                input_type: user
                required: false
              - name: post_script
                description: A script to run after the module action
                input_type: user
                required: false
                advanced: true
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/module_action_-_ansible_default.erb'
          - name: Package Action - Ansible Default
            job_category: Ansible Packages
            description_format: 'Package %{name}: %{state}'
            snippet: false
            template_inputs:
              - name: state
                required: true
                input_type: user
                description: Whether to install (present, latest), or remove (absent)
                  a package.
                options: "present\r\nabsent\r\nlatest"
                advanced: false
              - name: name
                required: true
                input_type: user
                description: "Package name, or package specifier with version, like\
                  \ name-1.0.\r\nBe aware that packages are not always named the\
                  \ same and this module will not 'translate' them per distro."
                advanced: false
              - name: pre_script
                description: A script to run prior to the package action
                input_type: user
                required: false
                advanced: true
              - name: post_script
                description: A script to run after the package action
                input_type: user
                required: false
                advanced: true
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/package_action_-_ansible_default.erb'
          - name: Power Action - Ansible Default
            job_category: Ansible Power
            description_format: '%{action} host'
            snippet: false
            template_inputs:
              - name: action
                required: true
                input_type: user
                description: Action to perform on the service
                options: "restart\r\nshutdown"
                advanced: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/power_action_-_ansible_default.erb'
          - name: Puppet Run Once - Ansible Default
            job_category: Ansible Puppet
            description_format: Run Puppet once with "%{puppet_options}"
            snippet: false
            template_inputs:
              - name: puppet_options
                required: false
                input_type: user
                description: Additional options to pass to Puppet
                advanced: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/puppet_run_once_-_ansible_default.erb'
          - name: Run Command - Ansible Default
            job_category: Ansible Commands
            description_format: Run %{command}
            snippet: false
            template_inputs:
              - name: command
                required: true
                input_type: user
                description: "Command to run on the host, e.g: \r\n\r\nmkdir helloworld"
                advanced: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/run_command_-_ansible_default.erb'
          - name: Run OpenSCAP scans - Ansible Default
            job_category: OpenSCAP Ansible Commands
            description_format: Run scan for all OpenSCAP policies on given hosts
            snippet: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/run_openscap_scans_-_ansible_default.erb'
          - name: Ansible - Run playbook
            snippet: false
            job_category: Ansible Playbook
            provider_type: Ansible
            kind: job_template
            feature: ansible_run_playbook
            template_inputs:
              - name: playbook
                required: true
                input_type: user
                description: The playbook to run against given hosts
                advanced: false
                value_type: plain
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/run_playbook-ansible_default.erb'
          - name: Service Action - Ansible Default
            job_category: Ansible Services
            description_format: '%{state} service %{name}'
            snippet: false
            template_inputs:
              - name: state
                required: true
                input_type: user
                description: started/stopped are idempotent actions that will not
                  run commands unless necessary. restarted will always bounce the
                  service. reloaded will always reload. At least one of state and
                  enabled are required. Note that reloaded will start the service
                  if it is not already started, even if your chosen init system
                  wouldn't normally.
                options: "started\r\nstopped\r\nrestarted\r\nreloaded"
                advanced: false
              - name: name
                required: true
                input_type: user
                description: Name of the service.
                advanced: false
              - name: pattern
                required: false
                input_type: user
                description: If the service does not respond to the status command,
                  name a substring to look for as would be found in the output of
                  the ps command as a stand-in for a status result. If the string
                  is found, the service will be assumed to be running.
                advanced: true
              - name: sleep
                required: false
                input_type: user
                description: If the service is being restarted then sleep this many
                  seconds between the stop and start command. This helps to workaround
                  badly behaving init scripts that exit immediately after signaling
                  a process to stop.
                advanced: true
              - name: enabled
                required: false
                input_type: user
                description: Whether the service should start on boot.
                advanced: true
              - name: args
                required: false
                input_type: user
                description: Additional arguments provided on the command line
                advanced: true
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/service_action_-_ansible_default.erb'
          - name: Service Action - Enable Web Console
            job_category: Ansible Services
            snippet: false
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            feature: ansible_enable_web_console
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/service_action_-_enable_web_console.erb'
          - kind: job_template
            name: Change content source
            job_category: Katello
            model: JobTemplate
            provider_type: script
            description_format: Configure subscription manager to new content source
            feature: katello_change_content_source
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/change_content_source.erb'
          - kind: job_template
            name: Install Errata - Katello Script Default
            job_category: Katello
            description_format: Install errata %{errata}
            feature: katello_errata_install
            provider_type: script
            template_inputs:
              - name: errata
                description: A comma-separated list of errata to install
                input_type: user
                required: true
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action,package
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_errata.erb'
          - name: Install Errata - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Install errata %{errata}
            template_inputs:
              - name: errata
                required: true
                input_type: user
                description: A comma separated list of errata to install
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_errata_-_katello_ansible_default.erb'
          - kind: job_template
            name: Install errata by search query - Katello Script Default
            job_category: Katello
            description_format: Install errata %{Errata search query}
            feature: katello_errata_install_by_search
            provider_type: script
            template_inputs:
              - name: Errata search query
                description: Filter criteria for errata to be installed.
                input_type: user
                required: false
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action,package
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_errata_by_search_query.erb'
          - kind: job_template
            name: Install Group - Katello Script Default
            job_category: Katello
            description_format: Install package group(s) %{package}
            feature: katello_group_install
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_group.erb'
          - name: Install Group - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Install package group(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_group_-_katello_ansible_default.erb'
          - kind: job_template
            name: Install Package - Katello Script Default
            job_category: Katello
            description_format: Install package(s) %{package}
            feature: katello_package_install
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_package.erb'
          - name: Install Package - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Install package(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_package_-_katello_ansible_default.erb'
          - kind: job_template
            name: Install packages by search query - Katello Script Default
            job_category: Katello
            description_format: Install package(s) %{Package search query}
            feature: katello_package_install_by_search
            provider_type: script
            template_inputs:
              - name: Package search query
                description: Filter criteria for packages to be installed. IMPORTANT-
                  If left blank, the job will attempt to install all possible packages.
                input_type: user
                required: false
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/install_packages_by_search_query.erb'
          - kind: job_template
            name: Remove Group - Katello Script Default
            job_category: Katello
            description_format: Remove package group(s) %{package}
            feature: katello_group_remove
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/remove_group.erb'
          - name: Remove Group - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Remove package group(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/remove_group_-_katello_ansible_default.erb'
          - kind: job_template
            name: Remove Package - Katello Script Default
            job_category: Katello
            description_format: Remove package(s) %{package}
            feature: katello_package_remove
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/remove_package.erb'
          - name: Remove Package - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Remove package(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/remove_package_-_katello_ansible_default.erb'
          - kind: job_template
            name: Remove Packages by search query - Katello Script Default
            job_category: Katello
            description_format: Remove packages %{Packages search query}
            feature: katello_packages_remove_by_search
            provider_type: script
            template_inputs:
              - name: Packages search query
                description: Filter criteria for packages to be removed.
                input_type: user
                required: true
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/remove_packages_by_search_query.erb'
          - kind: job_template
            name: Resolve Traces - Katello Script Default
            job_category: Katello
            description_format: Resolve Traces
            feature: katello_host_tracer_resolve
            provider_type: script
            template_inputs:
              - name: Traces search query
                description: Search query to provide traces to resolve
                input_type: user
                required: false
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/resolve_traces.erb'
          - name: Resolve Traces - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Resolve Traces
            template_inputs:
              - name: Traces search query
                description: Search query to provide traces to resolve
                input_type: user
                required: true
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/resolve_traces_-_katello_ansible_default.erb'
          - kind: job_template
            name: Restart Services - Katello Script Default
            job_category: Katello
            description_format: Restart Services
            feature: katello_service_restart
            provider_type: script
            template_inputs:
              - name: helper
                description: A comma separated list of commands to run to restart
                  services
                input_type: user
                required: true
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/restart_services.erb'
          - name: Restart Services - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Restart Services
            template_inputs:
              - name: helper
                required: true
                input_type: user
                description: A comma separated list of commands to run to restart
                  services
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/restart_services_-_katello_ansible_default.erb'
          - kind: job_template
            name: Update Group - Katello Script Default
            job_category: Katello
            description_format: Install package group(s) %{package}
            feature: katello_group_update
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/update_group.erb'
          - name: Update Group - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Install package group(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/update_group_-_katello_ansible_default.erb'
          - kind: job_template
            name: Update Package - Katello Script Default
            job_category: Katello
            description_format: Update package(s) %{package}
            feature: katello_package_update
            provider_type: script
            foreign_input_sets:
              - template: Package Action - Script Default
                exclude: action
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/update_package.erb'
          - name: Update Package - Katello Ansible Default
            snippet: false
            model: JobTemplate
            job_category: Katello via Ansible
            description_format: Update package(s) %{package}
            template_inputs:
              - name: package
                required: true
                input_type: user
                advanced: false
            provider_type: Ansible
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/update_package_-_katello_ansible_default.erb'
          - kind: job_template
            name: Update Packages by search query - Katello Script Default
            job_category: Katello
            description_format: Update package(s) %{Packages search query}
            feature: katello_packages_update_by_search
            provider_type: script
            template_inputs:
              - name: Packages search query
                description: Filter criteria for packages to be updated.
                input_type: user
                required: false
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/update_packages_by_search_query.erb'
          - name: Run OpenSCAP scans
            job_category: OpenSCAP
            description_format: Run scan for all OpenSCAP policies on host
            feature: foreman_openscap_run_scans
            provider_type: SSH
            snippet: false
            kind: job_template
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/run_openscap_scans.erb'
          - name: Run OVAL scans
            job_category: OpenSCAP
            description_format: Run scan for specified OVAL Policies
            feature: foreman_openscap_run_oval_scans
            provider_type: SSH
            snippet: false
            kind: job_template
            template_inputs:
              - name: oval_policies
                description: Comma separated OVAL Policy Ids to run
                input_type: user
                advanced: true
            state: present
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/run_oval_scans.erb'
          - name: Configure Cloud Connector
            state: absent
          - name: Convert to RHEL
            state: absent
          - name: Puppet Agent Disable - Script Default
            state: absent
          - name: Puppet Agent Enable - Script Default
            state: absent
          - name: Puppet Module - Install from forge - Script Default
            state: absent
          - name: Puppet Module - Install from git - Script Default
            state: absent
          - name: Puppet Run Once - Ansible Default
            state: absent
          - name: Puppet Run Once - Script Default
            state: absent
          - name: Ansible Collection - Upgrade from Galaxy
            state: present
            job_category: Ansible Galaxy
            description_format: Upgrade collections '%{ansible_collections_list}'
              from Galaxy
            snippet: false
            template_inputs:
              - name: ansible_collections_list
                required: true
                input_type: user
                description: |-
                  List of collections in Ansible Galaxy to install, separated by commas, e.g: mysql,nginx
                  The default collections_paths is configured in /etc/ansible/ansible.cfg, you may override it by filling the 'collections_path' input. Click on "Advanced" to see it.
                advanced: false
              - name: collections_path
                required: false
                input_type: user
                description: |-
                  A particular directory where you want the downloaded collections to be placed.
                advanced: true
            provider_type: Ansible
            kind: job_template
            model: JobTemplate
            file_name: '{{ role_path }}/../../../rabe_foreman/roles/foreman/files/job_templates/ansible_collections_-_install_from_galaxy.erb'
      when: not ansible_check_mode
  always:
    - name: 'RaBe Foreman Config : Lock All Job Templates'
      ansible.builtin.include_role:
        name: radiorabe.foreman.job_templates
      vars:
        foreman_job_templates:
          - name: '*'
            locked: true
      when: not ansible_check_mode
